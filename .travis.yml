language: cpp

os:
- linux
- osx

dist: trusty

python: '2.7'

addons:
  apt:
    packages:
    - python3-pip

install:
  - nvm install 8.9.4
  - mkdir -p third_party
  - bash .travis/prepare-emscripten.sh
  - bash .travis/prepare-ninja.sh
  - pip3 install -q --user meson

before_script:
  - ./ensure_dependencies.py
  - npm install

script:
  - meson --buildtype debug build/debug 
  - ninja -C build/debug
  - npm test

notifications:
  email: false
